<!--<p>study-plan works!</p>-->

<!--<div *ngFor="let subject of subjects">-->
<!--  {{subject.id}}-->
<!--  {{subject.name}}-->
<!--</div>-->
<div>
  <!--  Study plans table -->

  <table mat-table [dataSource]="studyPlans" class="mat-elevation-z8"
         style="width: 12%; margin-left: 3%; margin-top: 2%; align-items: center">

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Учебные планы</th>
      <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumnsStudyPlans"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsStudyPlans;"
        class="example-element-row"
        (click)="selectStudyPlan(row)"></tr>
  </table>


  <!--  Single study plan table -->
  <table mat-table #mytable [dataSource]="selectedStudyPlan.subjects" class="mat-elevation-z8"
         style="width:60%; margin-left: 3%; margin-top: 2%">


    <ng-container matColumnDef="swap" *ngIf="editMode">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <mat-icon (click)="swapWithUpper(element)">expand_less</mat-icon>
        <mat-icon (click)="swapWithLower(element)"> expand_more</mat-icon>
      </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Название дисциплины</th>
      <td mat-cell *matCellDef="let element">
        {{element.name}}
      </td>
    </ng-container>

    <ng-container matColumnDef="exams">
      <th mat-header-cell *matHeaderCellDef> Экзаменов</th>
      <td mat-cell *matCellDef="let element"> 4</td>
    </ng-container>

    <ng-container matColumnDef="offset">
      <th mat-header-cell *matHeaderCellDef> Зачетов</th>
      <td mat-cell *matCellDef="let element"> 6</td>
    </ng-container>

    <ng-container matColumnDef="rgr">
      <th mat-header-cell *matHeaderCellDef> РГР</th>
      <td mat-cell *matCellDef="let element"> 5</td>
    </ng-container>

    <ng-container matColumnDef="control-tasks">
      <th mat-header-cell *matHeaderCellDef> Контрольных работ</th>
      <td mat-cell *matCellDef="let element"> 9</td>
    </ng-container>

    <ng-container matColumnDef="auditory-lessons">
      <th mat-header-cell *matHeaderCellDef> Аудиторных занятий</th>
      <td mat-cell *matCellDef="let element"> 9</td>
    </ng-container>

    <ng-container matColumnDef="lectures">
      <th mat-header-cell *matHeaderCellDef> Лекций</th>
      <td mat-cell *matCellDef="let element"> 8</td>
    </ng-container>

    <ng-container matColumnDef="lab-tasks">
      <th mat-header-cell *matHeaderCellDef> Лабораторных работ</th>
      <td mat-cell *matCellDef="let element"> 11</td>
    </ng-container>

    <ng-container matColumnDef="practical-tasks">
      <th mat-header-cell *matHeaderCellDef> Практических работ</th>
      <td mat-cell *matCellDef="let element"> 12</td>
    </ng-container>

    <ng-container matColumnDef="delete-icon" *ngIf="editMode" stickyEnd>
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <mat-icon (click)="deleteSubjectFromStudyPlan(element)">cancel</mat-icon>
      </td>
    </ng-container>


    <!-- Header row second group -->
    <ng-container matColumnDef="study-plan">
      <th mat-header-cell *matHeaderCellDef
          [attr.colspan]="displayedColumnsSingleStudyPlan.length-1">
        {{selectedStudyPlan.name}}

      </th>
    </ng-container>

    <ng-container matColumnDef="edit-mode">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1" style="min-width: 60px">
        <mat-icon *ngIf="!editMode" (click)="editModeOn()">edit</mat-icon>
        <mat-icon *ngIf="editMode" (click)="editModeOff()">add</mat-icon>
        <mat-icon>delete</mat-icon>
      </th>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="['study-plan','edit-mode']"></tr>
    <tr mat-header-row *matHeaderRowDef="displayedColumnsSingleStudyPlan"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsSingleStudyPlan;"></tr>


  </table>

  <!--  Subjects table -->

  <table mat-table *ngIf="editMode" [dataSource]="allSubjects" class="mat-elevation-z8"
         style="width: 15%; margin-left: 3%; margin-top: 2%">

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2">Учебные предметы</th>
      <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>

    <ng-container matColumnDef="add-icon" stickyEnd>
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <mat-icon (click)="addSubjectToStudyPlan(element)"> add_circle</mat-icon>
      </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="['name']"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsSubjects;"></tr>
  </table>
</div>
